import{_ as k,b as C,c as y,j as B,k as S,u as I}from"./index-Cks_emWr.js";import{C as U}from"./ChangeLang-BfnSBYx4.js";import{r as p,k as m,l as R,J as q,K as f,j as s,n as d,R as x,S as $,F as L,g as N,a0 as j,a1 as z}from"./element-plus-CdAUbEXj.js";const A=c=>(j("data-v-98730c22"),c=c(),z(),c),E={class:"login"},F=A(()=>f("h1",{class:"title"},"Vue3 Element Admin",-1)),T={class:"change-lang"},W={__name:"index",setup(c){const{proxy:l}=N(),_=C(),v=y(),b=p(null),n=p({username:"admin",password:"123"}),V=p({username:[{required:!0,message:l.$t("login.rules-username"),trigger:"blur"}],password:[{required:!0,message:l.$t("login.rules-password"),trigger:"blur"}]}),t=p({register:{disabled:!1,loading:!1,txt:()=>t.value.register.loading?l.$t("login.registering"):l.$t("login.register"),cgi:B},login:{disabled:!1,loading:!1,txt:()=>t.value.login.loading?l.$t("login.logining"):l.$t("login.login"),cgi:S}}),h=(a,e=!0)=>{let{[a]:o,...r}=t.value;o.disabled=e,r.disabled=e,o.loading=e},w=a=>{let e=t.value[a];h(a,!0),b.value.validate(async o=>{if(!o)return;e.loading=!0;const{code:r,data:g}=await e.cgi(n.value);if(r!==0){h(a,!1);return}if(l.$message.success({message:"成功",duration:1e3}),I().initToken(g),!v.query.redirect)return _.push("/");const i=decodeURIComponent(v.query.redirect);i.startsWith("http")?window.location.href=i:i.startsWith("/")&&_.push(i)})};return(a,e)=>{const o=m("el-input"),r=m("el-form-item"),g=m("el-button"),i=m("el-form");return R(),q(L,null,[f("div",E,[s(i,{class:"form",model:n.value,rules:V.value,ref_key:"form",ref:b},{default:d(()=>[F,s(r,{prop:"username"},{default:d(()=>[s(o,{class:"text",modelValue:n.value.username,"onUpdate:modelValue":e[0]||(e[0]=u=>n.value.username=u),"prefix-icon":"User",clearable:"",placeholder:a.$t("login.username")},null,8,["modelValue","placeholder"])]),_:1}),s(r,{prop:"password"},{default:d(()=>[s(o,{class:"text",modelValue:n.value.password,"onUpdate:modelValue":e[1]||(e[1]=u=>n.value.password=u),"prefix-icon":"Lock","show-password":"",clearable:"",placeholder:a.$t("login.password")},null,8,["modelValue","placeholder"])]),_:1}),s(r,{class:"btn-group"},{default:d(()=>[s(g,{loading:t.value.login.loading,disabled:t.value.login.disabled,type:"default",class:"btn",size:"large",onClick:e[2]||(e[2]=u=>w("login"))},{default:d(()=>[x($(t.value.login.txt()),1)]),_:1},8,["loading","disabled"]),s(g,{loading:t.value.register.loading,disabled:t.value.register.disabled,type:"primary",class:"btn",size:"large",onClick:e[3]||(e[3]=u=>w("register"))},{default:d(()=>[x($(t.value.register.txt()),1)]),_:1},8,["loading","disabled"])]),_:1})]),_:1},8,["model","rules"])]),f("div",T,[s(U)])],64)}}},P=k(W,[["__scopeId","data-v-98730c22"]]);export{P as default};
