import{u as D,s as E,d as ve,g as ge,a as he,_ as R,b as H,c as J,e as be,f as Te,h as xe,i as Q}from"./index-Cks_emWr.js";import{c as y,b as X,$ as se,l as r,J as C,K as d,a0 as Z,a1 as ee,k as f,m as h,a2 as oe,L as z,S as x,F as W,n as _,j as p,Q as j,u as i,a3 as P,r as F,w as K,R as B,g as ne,q as le,t as Se,o as ae,G as ke,a4 as U,N as ye,a5 as Ce,O as we,a6 as $e}from"./element-plus-CdAUbEXj.js";import{C as Ie}from"./ChangeLang-BfnSBYx4.js";const Le=768,Me=()=>{const e=D(),{sidebar:t}=E(e),{setDevice:l,setCollapse:s}=e,n=y(()=>!!t.value.collapse),u=()=>window.innerWidth<Le,a=()=>{u()?(l("mobile"),s(!0)):(l("desktop"),s(n.value))};X(()=>{a(),window.addEventListener("resize",a)}),se(()=>{window.removeEventListener("resize",a)})},Be={menus:{isShow:!0,mode:"vertical"},tagsbar:{isShow:!0},breadcrumbs:{isShow:!0},topbar:{isFixed:!0},layout:{isFluid:!0}},G=ve("layoutSettings",{state:()=>ge("defaultSettings")||Be,actions:{saveSettings(e){Object.entries(e).forEach(([t,l])=>{this[t]=l}),he("defaultSettings",e)}}}),ze="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1618380288923'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='1997'%20data-spm-anchor-id='a313x.7781069.0.i9'%20width='200'%20height='200'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cstyle%20type='text/css'%3e%3c/style%3e%3c/defs%3e%3cpath%20d='M651.6%2085l-137%20137L372.9%2084.7c-10-9.7-3.2-26.6%2010.7-26.7l256.4-0.8c14.6%200%2021.9%2017.5%2011.6%2027.8z'%20fill='%23e81c56'%20p-id='1998'%20data-spm-anchor-id='a313x.7781069.0.i10'%20class=''%3e%3c/path%3e%3cpath%20d='M844.1%2071.2L717.8%20197.5v364.3c0%202.1-0.9%204.2-2.4%205.7L522.7%20760.1c14.8%2014%2072.2%2062.7%20157.4%2067.4l204.3-204.3c7.6-7.6%2011.8-17.8%2011.8-28.5V92.8c0.1-27.3-32.8-40.9-52.1-21.6z'%20fill='%2341b883'%20p-id='1999'%20data-spm-anchor-id='a313x.7781069.0.i5'%20class=''%3e%3c/path%3e%3cpath%20d='M522.7%20760.1l-2.1%202.1-202.7-202.7V202.8c0-8.3-3.3-16.3-9.2-22.2L194.5%2067.3c-20.7-20.5-55.9-5.9-55.9%2023.3V638l334%20334c17.4%2017.4%2045.6%2017.4%2063%200l144.5-144.5c-85.2-4.7-142.5-53.3-157.4-67.4z'%20fill='%231296db'%20p-id='2000'%20data-spm-anchor-id='a313x.7781069.0.i6'%20class=''%3e%3c/path%3e%3c/svg%3e",Pe=e=>(Z("data-v-db56979a"),e=e(),ee(),e),Re={class:"brand"},Ae=Pe(()=>d("div",{class:"title"},"Vue3 Element Admin",-1)),Ee={__name:"Logo",setup(e){const t=H(),l=()=>{t.push("/")};return(s,n)=>(r(),C("div",Re,[d("img",{class:"logo",src:ze,onClick:l}),Ae]))}},ce=R(Ee,[["__scopeId","data-v-db56979a"]]),Ve={__name:"Item",props:["title","icon"],setup(e){const t=e,l=y(()=>{var s,n;return(n=(s=t==null?void 0:t.icon)==null?void 0:s.startsWith)==null?void 0:n.call(s,"icon-")});return(s,n)=>{const u=f("svg-icon");return r(),C(W,null,[l.value?(r(),h(u,{key:0,name:e.icon,class:"icon"},null,8,["name"])):e.icon?(r(),h(oe(e.icon),{key:1,class:"icon"})):z("",!0),d("span",null,x(s.$t(e.title)),1)],64)}}},te=R(Ve,[["__scopeId","data-v-e7166b0b"]]),We={__name:"Submenu",props:{menu:{type:Object,required:!0},isNest:{type:Boolean,default:!1}},setup(e){return(t,l)=>{const s=f("el-menu-item"),n=f("submenu",!0),u=f("el-sub-menu");return e.menu.children?(r(),h(u,{key:1,index:e.menu.url},{title:_(()=>[p(te,{icon:e.menu.icon,title:e.menu.title},null,8,["icon","title"])]),default:_(()=>[(r(!0),C(W,null,j(e.menu.children,a=>(r(),h(n,{key:a.url,"is-nest":!0,menu:a},null,8,["menu"]))),128))]),_:1},8,["index"])):(r(),h(s,{key:0,index:e.menu.url},{default:_(()=>[p(te,{icon:e.menu.icon,title:e.menu.title},null,8,["icon","title"])]),_:1},8,["index"]))}}},De="#304156",Fe="#fff",He="#409eff",Oe={menuBg:De,menuTextColor:Fe,menuActiveTextColor:He},Ue={__name:"Menus",props:{collapse:{type:Boolean,default:!1},mode:{type:String,default:"vertical"}},setup(e){const t=J(),{menus:l}=E(be()),s=y(()=>t.path),n=y(()=>Oe);return(u,a)=>{const o=f("el-menu"),c=f("el-scrollbar");return r(),h(c,{class:"scroll"},{default:_(()=>[p(o,{class:"menu",mode:e.mode,collapse:e.collapse,uniqueOpened:!0,router:!0,"default-active":s.value,"background-color":n.value.menuBg,"text-color":n.value.menuTextColor,"active-text-color":n.value.menuActiveTextColor},{default:_(()=>[(r(!0),C(W,null,j(i(l),m=>(r(),h(We,{key:m.url,menu:m,class:"sub-menu"},null,8,["menu"]))),128))]),_:1},8,["mode","collapse","default-active","background-color","text-color","active-text-color"])]),_:1})}}},re=R(Ue,[["__scopeId","data-v-29568f43"]]),Ne={__name:"index",setup(e){const t=D(),{sidebar:l,device:s}=E(t),{setCollapse:n}=t,u=y(()=>l.value.collapse),a=()=>{n(!0)};return(o,c)=>(r(),C(W,null,[d("div",{class:P(["left",{collapse:u.value,mobile:i(s)==="mobile"}])},[p(ce),p(re,{collapse:u.value},null,8,["collapse"])],2),d("div",{class:"mask",onClick:a})],64))}},je=R(Ne,[["__scopeId","data-v-5f980bf3"]]),Ge={__name:"Hamburger",setup(e){const t=D(),{sidebar:l}=E(t),{setCollapse:s}=t,n=y(()=>l.value.collapse),u=()=>{s(!l.value.collapse)};return(a,o)=>{const c=f("Fold"),m=f("el-icon");return r(),h(m,{size:20,class:P(["fold-btn",{collapse:n.value}]),onClick:u},{default:_(()=>[p(c)]),_:1},8,["class"])}}},qe=R(Ge,[["__scopeId","data-v-80fcbb17"]]),Ye={__name:"Breadcrumbs",emits:["on-breadcrumbs-change"],setup(e,{emit:t}){const{proxy:l}=ne(),{device:s}=E(D()),u=H().currentRoute,a=F([]),o=G(),c=y(()=>o.menus.mode==="horizontal"),m=t,g=b=>{const M=[{path:"/",meta:{title:"route.homepage"}}];if(b.name==="home")return M;{const A=b.matched.filter(w=>!!w.meta&&!!w.meta.title);return[...M,...A]}};return X(()=>{a.value=g(u.value)}),K(u,b=>{u.value.meta.truetitle=l.$t(u.value.meta.title),a.value=g(b),m("on-breadcrumbs-change",a.value.length>1)},{immediate:!0}),(b,M)=>{const A=f("el-breadcrumb-item"),w=f("el-breadcrumb");return r(),h(w,{"separator-class":"el-icon-arrow-right",class:P(["breadcrumb",{mobile:i(s)==="mobile",show:c.value,hide:a.value.length<=1}])},{default:_(()=>[(r(!0),C(W,null,j(a.value,(v,V)=>(r(),h(A,{key:V,class:P({no_link:V===a.value.length-1}),to:V<a.value.length-1?v.path:""},{default:_(()=>[B(x(b.$t(v.meta.title)),1)]),_:2},1032,["class","to"]))),128))]),_:1},8,["class"])}}},ie=R(Ye,[["__scopeId","data-v-5ef72a09"]]),Ke=()=>{const{userinfo:e}=E(Te());return{userinfo:e}},Je=e=>(Z("data-v-5adb0d39"),e=e(),ee(),e),Qe={class:"userinfo"},Xe=Je(()=>d("i",{class:"el-icon-user"},null,-1)),Ze=["src"],et={__name:"Userinfo",setup(e){const t=H(),{userinfo:l}=Ke(),s=()=>{D().clearToken(),t.push("/login")},n=()=>{t.push("/self")};return(u,a)=>{const o=f("el-dropdown-item"),c=f("el-dropdown-menu"),m=f("el-dropdown");return r(),h(m,{trigger:"hover"},{dropdown:_(()=>[p(c,null,{default:_(()=>[p(o,{onClick:n},{default:_(()=>[B(x(u.$t("topbar.center")),1)]),_:1}),p(o,{onClick:s},{default:_(()=>[B(x(u.$t("topbar.logout")),1)]),_:1})]),_:1})]),default:_(()=>[d("div",Qe,[i(l)?(r(),C(W,{key:1},[d("img",{class:"avatar",src:i(l).avatar,alt:"avatar"},null,8,Ze),B(" "+x(i(l).name),1)],64)):(r(),C(W,{key:0},[Xe,B(" admin ")],64))])]),_:1})}}},tt=R(et,[["__scopeId","data-v-5adb0d39"]]),O=e=>(Z("data-v-e077795d"),e=e(),ee(),e),st={key:0,class:"errLog-container"},ot=O(()=>d("span",{style:{"padding-right":"10px"}},"错误日志",-1)),nt={style:{"margin-bottom":"10px"}},lt=O(()=>d("span",{class:"message-title",style:{"padding-right":"16px"}}," 页面: ",-1)),at={style:{"margin-bottom":"10px"}},ct=O(()=>d("span",{class:"message-title"},"事件源:",-1)),rt={style:{"margin-bottom":"10px"}},it=O(()=>d("span",{class:"message-title"},"错误提示:",-1)),ut={key:0},dt=O(()=>d("span",{class:"message-title",style:{"padding-right":"16px"}}," 接口地址: ",-1)),mt={__name:"index",setup(e){const t=F(!1),l=xe(),{logs:s}=E(l),{clearErrorLog:n}=l,u=()=>{t.value=!1,n()};return(a,o)=>{const c=f("svg-icon"),m=f("el-button"),g=f("el-badge"),b=f("el-tag"),M=f("el-table-column"),A=f("el-table"),w=f("el-dialog");return i(s).length>0?(r(),C("div",st,[p(g,{"is-dot":!0,onClick:o[0]||(o[0]=v=>t.value=!0)},{default:_(()=>[p(m,{style:{padding:"8px 10px"},size:"small",type:"danger"},{default:_(()=>[p(c,{name:"bug"})]),_:1})]),_:1}),p(w,{modelValue:t.value,"onUpdate:modelValue":o[1]||(o[1]=v=>t.value=v),width:"80%","append-to-body":""},{title:_(()=>[ot,p(m,{size:"small",type:"primary",icon:"el-icon-delete",onClick:u},{default:_(()=>[B(" Clear All ")]),_:1})]),default:_(()=>[p(A,{data:i(s),border:""},{default:_(()=>[p(M,{label:"Message"},{default:_(({row:v})=>[d("div",nt,[lt,p(b,{type:"success"},{default:_(()=>[B(x(v.url),1)]),_:2},1024)]),d("div",at,[ct,p(b,{type:"primary"},{default:_(()=>[B(x(v.info&&v.info),1)]),_:2},1024)]),d("div",rt,[it,p(b,{type:"danger"},{default:_(()=>[B(x(v.err&&v.err.message),1)]),_:2},1024)]),v.err&&v.err.config?(r(),C("div",ut,[dt,p(b,{type:"info"},{default:_(()=>[B(x(v.err&&v.err.config&&v.err.config.url),1)]),_:2},1024)])):z("",!0)]),_:1}),p(M,{label:"Stack"},{default:_(({row:v})=>[B(x(v.err&&v.err.stack),1)]),_:1})]),_:1},8,["data"])]),_:1},8,["modelValue"])])):z("",!0)}}},_t=R(mt,[["__scopeId","data-v-e077795d"]]),pt={class:"navigation"},ft={class:"action"},vt={__name:"index",setup(e){const t=G(),{device:l}=E(D()),s=y(()=>t.menus.mode==="horizontal"),n=y(()=>s.value||l.value==="mobile"),u=y(()=>!s.value),a=y(()=>t.breadcrumbs.isShow&&!s.value);return(o,c)=>(r(),C("div",{class:P(["header",{"no-border":s.value}])},[d("div",pt,[n.value?(r(),h(ce,{key:0,class:P(["mobile",{"show-title":s.value}])},null,8,["class"])):z("",!0),u.value?(r(),h(qe,{key:1})):z("",!0),a.value?(r(),h(ie,{key:2})):z("",!0)]),d("div",ft,[p(_t),p(tt),p(Ie)])],2))}},gt=R(vt,[["__scopeId","data-v-9e9d4b4d"]]),ht=(e,t)=>{const l=F(0),s=a=>{l.value=a,t.value.setScrollLeft(l.value)};return{handleScroll:a=>{var m,g;const o=t.value.wrapRef;if(!o)return;if(o.offsetWidth+l.value>((g=(m=o==null?void 0:o.children)==null?void 0:m[0])==null?void 0:g.scrollWidth)){s(o.children[0].scrollWidth-o.offsetWidth);return}else if(l.value<0){s(0);return}const c=a.wheelDelta||-a.deltaY;s(l.value-c/4)},moveToTarget:a=>{const o=t.value.wrapRef;if(!o)return;const c=e.value;let m=null,g=null;if(c.length>0&&(m=c[0],g=c[c.length-1]),m===a)s(0);else if(g===a)s(o.children[0].scrollWidth-o.offsetWidth);else{const b=a.$el.nextElementSibling;b.offsetLeft+b.offsetWidth>o.offsetWidth?s(b.offsetLeft-b.offsetWidth):s(0)}}}},N=e=>!!e.meta&&!!e.meta.affix,bt=e=>{const t=Q(),{tagList:l}=E(t),{addTag:s,delTag:n,saveActivePosition:u,updateTagList:a}=t,o=H(),c=o.currentRoute,m=y(()=>o.getRoutes()),g=F([]),b=(S,k)=>{g.value[S]=k},M=ht(g,e);K(()=>l.value.length,()=>{g.value=[]});const A=()=>{m.value.filter(I=>N(I)).forEach(I=>{I.name&&s(I)}),l.value.filter(I=>m.value.every($=>$.name!==I.name)).forEach(I=>{n(I)})},w=()=>{const S=c.value;console.log("🔎 ~ addTagList ~ tag:",S),S.name&&s(S)},v=S=>{const k=l.value.findIndex(I=>I.fullPath===S.fullPath);u(Math.max(0,k))},V=()=>{le(()=>{var S;for(const k of g.value)if(((S=k==null?void 0:k.to)==null?void 0:S.path)===c.value.path){M.moveToTarget(k),k.to.fullPath!==c.value.fullPath&&a(c.value);break}})};return X(()=>{A(),w(),V()}),K(c,(S,k)=>{v(k),w(),V()}),{tagList:l,setItemRef:b,...M}},Tt=e=>{const t=H(),l=J(),s=Q(),n=Se({visible:!1,top:0,left:0,selectedTag:{},openMenu(o,c){n.visible=!0,n.left=c.clientX,n.top=c.clientY,n.selectedTag=o},closeMenu(){n.visible=!1},refreshSelectedTag(o){s.deCacheList(o),le(()=>{t.replace(o)})},closeTag(o){if(N(o))return;const c=e.value.findIndex(m=>m.fullPath===o.fullPath);s.delTag(o),u(o)&&a(c-1)},closeOtherTags(){s.delOtherTags(n.selectedTag),t.push(n.selectedTag)},closeLeftTags(){n.closeSomeTags("left")},closeRightTags(){n.closeSomeTags("right")},closeSomeTags(o){const c=e.value.findIndex(g=>g.fullPath===n.selectedTag.fullPath);if(o==="left"&&c<=0||o==="right"&&c>=e.value.length-1)return;const m=o==="left"?e.value.slice(0,c):e.value.slice(c+1);s.delSomeTags(m),t.push(n.selectedTag)},closeAllTags(){s.delAllTags(),t.push("/")}}),u=o=>o.fullPath===l.fullPath,a=o=>{const c=e.value[o];c?t.push(c.fullPath):t.push("/")};return ae(()=>{document.addEventListener("click",n.closeMenu)}),se(()=>{document.removeEventListener("click",n.closeMenu)}),ke(n)},xt=["onClick","onMouseup","onContextmenu"],St={class:"title"},kt={__name:"index",setup(e){const t=G(),l=y(()=>t.tagsbar.isShow),s=F(null),{tagList:n,setItemRef:u,handleScroll:a}=bt(s),{visible:o,top:c,left:m,selectedTag:g,openMenu:b,closeMenu:M,refreshSelectedTag:A,closeTag:w,closeOtherTags:v,closeLeftTags:V,closeRightTags:S,closeAllTags:k}=Tt(n),I=$=>{a($),M.value()};return ae(()=>{const $=ne();$.appContext.config.globalProperties.$tagsbar=()=>{A(g)}}),($,L)=>{const ue=f("Close"),de=f("el-icon"),me=f("router-link"),_e=f("el-scrollbar");return r(),C(W,null,[d("div",{class:P(["tags-container",{hide:!l.value}])},[p(_e,{ref_key:"scrollContainer",ref:s,vertical:!1,class:"scroll-container",onWheel:U(I,["prevent"])},{default:_(()=>[(r(!0),C(W,null,j(i(n),(T,pe)=>(r(),h(me,{key:T.fullPath,to:T,ref_for:!0,ref:q=>i(u)(pe,q),custom:""},{default:_(({navigate:q,isExactActive:fe})=>[d("div",{class:P(["tags-item",fe?"active":""]),onClick:q,onMouseup:U(Y=>i(w)(T),["middle"]),onContextmenu:U(Y=>i(b)(T,Y),["prevent"])},[d("span",St,x($.$t(T.title)),1),i(N)(T)?z("",!0):(r(),h(de,{key:0,class:"el-icon-close",onClick:U(Y=>i(w)(T),["prevent","stop"])},{default:_(()=>[p(ue)]),_:2},1032,["onClick"]))],42,xt)]),_:2},1032,["to"]))),128))]),_:1},512)],2),ye(d("ul",{style:we({left:i(m)+"px",top:i(c)+"px"}),class:"contextmenu"},[d("li",{onClick:L[0]||(L[0]=T=>i(A)(i(g)))},x($.$t("tags.refresh")),1),i(N)(i(g))?z("",!0):(r(),C("li",{key:0,onClick:L[1]||(L[1]=T=>i(w)(i(g)))},x($.$t("tags.close")),1)),d("li",{onClick:L[2]||(L[2]=(...T)=>i(v)&&i(v)(...T))},x($.$t("tags.other")),1),d("li",{onClick:L[3]||(L[3]=(...T)=>i(V)&&i(V)(...T))},x($.$t("tags.left")),1),d("li",{onClick:L[4]||(L[4]=(...T)=>i(S)&&i(S)(...T))},x($.$t("tags.right")),1),d("li",{onClick:L[5]||(L[5]=(...T)=>i(k)&&i(k)(...T))},x($.$t("tags.all")),1)],4),[[Ce,i(o)]])],64)}}},yt=R(kt,[["__scopeId","data-v-5a201d0a"]]),Ct={__name:"index",setup(e){const t=J(),{cacheList:l}=E(Q()),s=y(()=>t.fullPath);return(n,u)=>{const a=f("router-view");return r(),h(a,null,{default:_(({Component:o})=>[(r(),h($e,{include:i(l)},[(r(),h(oe(o),{key:s.value}))],1032,["include"]))]),_:1})}}},wt={class:"top"},$t={__name:"index",setup(e){Me();const t=G(),l=t.layout.isFluid,s=t.topbar.isFixed,n=t.menus.isShow,u=t.menus.mode==="horizontal",a=y(()=>u&&t.breadcrumbs.isShow),o=F(!0),c=m=>{o.value=m};return(m,g)=>(r(),C("div",{class:P(["wrapper",{fluid:i(l)}])},[i(n)&&!u?(r(),h(je,{key:0})):z("",!0),d("div",{class:P(["right",{flex:i(s)}])},[d("div",wt,[p(gt),i(n)&&u?(r(),h(re,{key:0,mode:"horizontal"})):z("",!0),p(yt),a.value?(r(),h(ie,{key:1,onOnBreadcrumbsChange:c})):z("",!0)]),d("div",{class:P(["main",{pt0:a.value&&o.value}])},[p(Ct)],2)],2)],2))}},Bt=R($t,[["__scopeId","data-v-5e822deb"]]);export{Bt as default};
